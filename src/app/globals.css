@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile Modal Support */
@layer utilities {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }

  .-webkit-overflow-scrolling-touch {
    -webkit-overflow-scrolling: touch;
  }
}

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

:root {
  --background: #ffffff;
  --foreground: #171717;
  --primary-50: #eff6ff;
  --primary-100: #dbeafe;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;
  --primary-900: #1e3a8a;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: 'Inter', Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
}

* {
  box-sizing: border-box;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }
  
  .btn-primary {
    @apply btn bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-600;
  }
  
  .btn-secondary {
    @apply btn bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-500;
  }
  
  .btn-outline {
    @apply btn border border-gray-300 bg-transparent hover:bg-gray-50 focus-visible:ring-gray-500;
  }
  
  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-600;
  }

  .card {
    @apply rounded-xl border border-gray-200 bg-white p-6 shadow-sm;
  }

  .input {
    @apply block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500;
  }

  .label {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }

  .badge {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium;
  }

  .badge-success {
    @apply badge bg-green-100 text-green-800;
  }

  .badge-warning {
    @apply badge bg-yellow-100 text-yellow-800;
  }

  .badge-danger {
    @apply badge bg-red-100 text-red-800;
  }

  .badge-info {
    @apply badge bg-blue-100 text-blue-800;
  }

  .badge-secondary {
    @apply badge bg-gray-100 text-gray-800;
  }

  /* Mobile dropdown fixes - FORCE POSITION FIX */
  @media (max-width: 768px) {
    /* Remove this - let body/html have natural scroll behavior */

    /* Force native select dropdowns to position correctly */
    select {
      font-size: 16px !important; /* Prevent iOS zoom */
      min-height: 44px !important; /* Touch-friendly */
      padding: 12px !important;
      /* Force dropdown positioning */
      position: relative !important;
      z-index: 9999 !important;
    }

    /* Force the entire main content to not be constrained */
    main, .max-w-full, .mx-auto {
      max-width: 100vw !important;
    }

    /* Specific fix for the vehicles page layout */
    .xl\\:max-w-\\[1400px\\] {
      max-width: 100vw !important;
    }

    /* Enhanced mobile touch targets */
    button, .btn, a[role="button"] {
      min-height: 44px !important;
      min-width: 44px !important;
      padding: 12px !important;
    }

    /* Better mobile input handling */
    input, textarea {
      font-size: 16px !important; /* Prevent iOS zoom */
      min-height: 44px !important;
    }

    /* Default padding for inputs without specific component styling */
    input:not([class*="pl-"]):not([class*="pr-"]), textarea:not([class*="pl-"]):not([class*="pr-"]) {
      padding: 12px !important;
    }

    /* Ensure our responsive input components work properly */
    .responsive-input-with-icon {
      padding: 12px !important;
    }

    .responsive-input-with-icon.pl-11 {
      padding-left: 2.75rem !important; /* 44px */
    }

    .responsive-input-with-icon.pr-11 {
      padding-right: 2.75rem !important; /* 44px */
    }

    /* Mobile-friendly cards */
    .card {
      margin: 8px 0 !important;
      padding: 16px !important;
    }

    /* Improved mobile navigation */
    .mobile-nav-item {
      min-height: 48px !important;
      padding: 16px !important;
    }

    /* Better mobile table handling */
    .table-responsive {
      overflow-x: auto !important;
      -webkit-overflow-scrolling: touch !important;
    }

    /* Mobile optimizations handled by individual components */

    /* Prevent zoom on mobile dropdowns without affecting navigation */
    select, input, textarea, button {
      font-size: 16px !important; /* Prevent iOS zoom */
    }

    /* Ensure dropdowns don't interfere with navigation positioning */
    [data-headlessui-state="open"] {
      transform: translateZ(0); /* Hardware acceleration for better performance */
    }

    /* Force dropdown options to appear above all content */
    [role="listbox"], [role="menu"] {
      z-index: 9999 !important;
      position: relative;
    }

    /* Ensure dropdown containers have proper stacking context */
    .relative:has([role="listbox"]),
    .relative:has([role="menu"]) {
      z-index: 9999;
    }

    /* Improved mobile modals */
    .modal-mobile {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      border-radius: 0 !important;
    }

    /* Better mobile form layouts */
    .form-mobile {
      padding: 16px !important;
    }

    .form-mobile .form-group {
      margin-bottom: 20px !important;
    }

    /* Improved mobile grid layouts */
    .grid-mobile-1 {
      grid-template-columns: 1fr !important;
      gap: 16px !important;
    }

    /* Mobile-specific spacing */
    .mobile-spacing {
      margin: 12px 0 !important;
      padding: 12px !important;
    }

    /* Better mobile typography */
    h1 { font-size: 1.875rem !important; } /* 30px */
    h2 { font-size: 1.5rem !important; }   /* 24px */
    h3 { font-size: 1.25rem !important; }  /* 20px */
    h4 { font-size: 1.125rem !important; } /* 18px */

    /* Mobile-optimized text sizes */
    .text-mobile-lg { font-size: 1.125rem !important; }
    .text-mobile-base { font-size: 1rem !important; }
    .text-mobile-sm { font-size: 0.875rem !important; }
    .text-mobile-xs { font-size: 0.75rem !important; }
  }
}

/* SweetAlert2 Dark Mode Support */
.dark-mode-popup {
  background-color: #1f2937 !important; /* gray-800 */
  color: #f9fafb !important; /* gray-50 */
  border: 1px solid #374151 !important; /* gray-700 */
}

.dark-mode-title {
  color: #f9fafb !important; /* gray-50 */
}

.dark-mode-html {
  color: #d1d5db !important; /* gray-300 */
}

.dark-mode-confirm-button {
  background-color: #dc2626 !important; /* Keep button colors as they are for accessibility */
}

.dark-mode-cancel-button {
  background-color: #6b7280 !important; /* gray-500 */
  border: 1px solid #4b5563 !important; /* gray-600 */
  color: #f9fafb !important; /* gray-50 */
}

/* Additional dark mode overrides for SweetAlert2 */
.swal2-popup.dark-mode-popup .swal2-icon {
  border-color: #374151 !important; /* gray-700 */
}

.swal2-popup.dark-mode-popup .swal2-icon.swal2-success .swal2-success-ring {
  border-color: #10b981 !important; /* emerald-500 */
}

.swal2-popup.dark-mode-popup .swal2-icon.swal2-success .swal2-success-fix {
  background-color: #1f2937 !important; /* gray-800 */
}

.swal2-popup.dark-mode-popup .swal2-icon.swal2-error .swal2-error-line {
  background-color: #ef4444 !important; /* red-500 */
}

.swal2-popup.dark-mode-popup .swal2-icon.swal2-warning {
  border-color: #f59e0b !important; /* amber-500 */
  color: #f59e0b !important;
}

.swal2-popup.dark-mode-popup .swal2-icon.swal2-info {
  border-color: #3b82f6 !important; /* blue-500 */
  color: #3b82f6 !important;
}

.swal2-popup.dark-mode-popup .swal2-icon.swal2-question {
  border-color: #8b5cf6 !important; /* violet-500 */
  color: #8b5cf6 !important;
}

/* Timer progress bar dark mode */
.swal2-popup.dark-mode-popup .swal2-timer-progress-bar {
  background: rgba(16, 185, 129, 0.8) !important; /* emerald-500 with opacity */
}

/* Loading spinner dark mode */
.swal2-popup.dark-mode-popup .swal2-loader {
  border-color: #374151 #374151 #374151 #f9fafb !important; /* gray-700 and gray-50 */
}

/* Custom scrollbar styles for dark mode */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: #d1d5db #f3f4f6; /* light mode: gray-300 thumb, gray-100 track */
}

.dark .custom-scrollbar {
  scrollbar-color: #4b5563 #1f2937; /* dark mode: gray-600 thumb, gray-800 track */
}

/* Webkit browsers */
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: #f3f4f6; /* gray-100 */
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #d1d5db; /* gray-300 */
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #9ca3af; /* gray-400 */
}

/* Dark mode webkit scrollbar */
.dark .custom-scrollbar::-webkit-scrollbar-track {
  background: #1f2937; /* gray-800 */
}

.dark .custom-scrollbar::-webkit-scrollbar-thumb {
  background: #4b5563; /* gray-600 */
}

.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #6b7280; /* gray-500 */
}